/*C15*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C16*/SET SCHEMA PUBLIC
CONNECT USER SA
alter table access_role_people drop constraint FKFB127C1DC2179E92
alter table access_role_people drop constraint FKFB127C1D41AA005B
alter table feature drop constraint FKC5A27AF6A6B1F7A2
alter table problem drop constraint FKED8CC29F429305D0
alter table problem drop constraint FKED8CC29FA6B1F7A2
alter table product_backlog_item drop constraint FKA29882659A2780F5
alter table product_backlog_item drop constraint FKA298826525E191DD
alter table product_backlog_item drop constraint FKA2988265D4E6642
alter table product_backlog_item drop constraint FKA2988265AEC2D506
alter table product_backlog_item drop constraint FKA2988265BC8571FD
alter table product_backlog_item drop constraint FKA2988265A6B1F7A2
alter table release drop constraint FK41012807A6B1F7A2
alter table remaining_estimation drop constraint FKA73809F46F3B8C52
alter table role drop constraint FK358076C2179E92
alter table role drop constraint FK358076D81D7A32
alter table role drop constraint FK358076A6B1F7A2
alter table sprint drop constraint FKCA9D021A373B00A2
alter table sprint_product_backlog_item drop constraint FKEDE8CF6AA7D93BA3
alter table sprint_product_backlog_item drop constraint FKEDE8CF6A5A4EC52E
alter table task drop constraint FK3635855A4EC52E
alter table task drop constraint FK363585D81D7A32
alter table task drop constraint FK36358575123D52
alter table task drop constraint FK3635851D13A291
alter table task_actual drop constraint FK59F02188C2179E92
alter table task_actual drop constraint FK59F021886F3B8C52
alter table team_composition drop constraint FK756806C8C2179E92
alter table team_composition drop constraint FK756806C8D81D7A32
alter table team_composition drop constraint FK756806C875123D52
drop table access_role if exists
drop table access_role_people if exists
drop table audit_log if exists
drop table budget_line if exists
drop table custom_role if exists
drop table feature if exists
drop table problem if exists
drop table product if exists
drop table product_backlog_item if exists
drop table release if exists
drop table remaining_estimation if exists
drop table requestmap if exists
drop table role if exists
drop table sprint if exists
drop table sprint_product_backlog_item if exists
drop table task if exists
drop table task_actual if exists
drop table team if exists
drop table team_composition if exists
drop table user if exists
create table access_role (id bigint generated by default as identity (start with 1), version bigint not null, authority varchar(255) not null, description varchar(255) not null, primary key (id), unique (authority))
create table access_role_people (user_id bigint not null, access_role_id bigint not null, primary key (access_role_id, user_id))
create table audit_log (id bigint generated by default as identity (start with 1), version bigint not null, actor varchar(255), class_name varchar(255) not null, date_created timestamp not null, event_name varchar(255) not null, last_updated timestamp not null, new_value varchar(255), old_value varchar(255), persisted_object_id varchar(255), persisted_object_version varchar(255), property_name varchar(255), uri varchar(255), primary key (id))
create table budget_line (id bigint generated by default as identity (start with 1), version bigint not null, description varchar(255), name varchar(255) not null, primary key (id))
create table custom_role (id bigint generated by default as identity (start with 1), version bigint not null, description varchar(255) not null, expertise_level varchar(255) not null, instances integer not null, name varchar(255) not null, satisfication_criteria varchar(255) not null, usage_frequency varchar(255) not null, primary key (id))
create table feature (id bigint generated by default as identity (start with 1), version bigint not null, description varchar(1000), name varchar(255) not null, product_id bigint not null, primary key (id))
create table problem (id bigint generated by default as identity (start with 1), version bigint not null, closed_date date, creation_date date not null, impact varchar(1000), modification_date date, name varchar(255) not null, poster_id bigint not null, product_id bigint not null, rank integer not null, solution varchar(1000), state varchar(255) not null, primary key (id))
create table product (id bigint generated by default as identity (start with 1), version bigint not null, description varchar(1000) not null, name varchar(255) not null, start_date date not null, primary key (id))
create table product_backlog_item (id bigint generated by default as identity (start with 1), version bigint not null, budget_line_id bigint, creation_date date not null, custom_role_id bigint, description varchar(1000), estimated_points double, estimation_date date, estimation_type varchar(255) not null, feature_id bigint, how_to_test varchar(1000), label varchar(255) not null, notes varchar(2000), number integer not null, owner_user_id bigint not null, planned_release_id bigint, product_id bigint not null, rank integer not null, state varchar(255) not null, type varchar(255) not null, primary key (id))
create table release (id bigint generated by default as identity (start with 1), version bigint not null, default_estimated_velocity double not null, estimated_sprint_duration double not null, goal varchar(255), name varchar(255) not null, product_id bigint not null, publish_date date not null, release_velocity double not null, start_date date not null, state varchar(255) not null, type varchar(255) not null, primary key (id))
create table remaining_estimation (id bigint generated by default as identity (start with 1), version bigint not null, date date not null, remaining_points double not null, task_id bigint not null, primary key (id), unique (task_id, date))
create table requestmap (id bigint generated by default as identity (start with 1), version bigint not null, config_attribute varchar(255) not null, url varchar(255) not null, primary key (id), unique (url))
create table role (id bigint generated by default as identity (start with 1), version bigint not null, description varchar(1000), name varchar(255) not null, product_id bigint not null, sprint_id bigint, user_id bigint not null, primary key (id))
create table sprint (id bigint generated by default as identity (start with 1), version bigint not null, daily_work_time double, end_date date not null, estimated_velocity double, goal varchar(255) not null, number integer not null, release_id bigint not null, start_date date not null, state varchar(255) not null, velocity double, primary key (id))
create table sprint_product_backlog_item (sprint_product_backlog_items_id bigint, product_backlog_item_id bigint)
create table task (id bigint generated by default as identity (start with 1), version bigint not null, creator_id bigint not null, estimated_points double not null, issue_tracking_id varchar(255), label varchar(255) not null, notes varchar(2000), product_backlog_item_id bigint not null, sprint_id bigint not null, state varchar(255) not null, team_id bigint, type varchar(255) not null, primary key (id))
create table task_actual (id bigint generated by default as identity (start with 1), version bigint not null, actual_points double not null, date date not null, task_id bigint not null, user_id bigint not null, primary key (id), unique (task_id, user_id, date))
create table team (id bigint generated by default as identity (start with 1), version bigint not null, description varchar(255), label varchar(255) not null, primary key (id))
create table team_composition (id bigint generated by default as identity (start with 1), version bigint not null, sprint_id bigint not null, team_id bigint not null, user_id bigint not null, primary key (id))
create table user (id bigint generated by default as identity (start with 1), version bigint not null, email varchar(255), email_show bit not null, enabled bit not null, is_active bit not null, is_admin bit not null, login varchar(15) not null, password varchar(255) not null, photo varbinary(255), user_real_name varchar(255), primary key (id), unique (login))
alter table access_role_people add constraint FKFB127C1DC2179E92 foreign key (user_id) references user
alter table access_role_people add constraint FKFB127C1D41AA005B foreign key (access_role_id) references access_role
alter table feature add constraint FKC5A27AF6A6B1F7A2 foreign key (product_id) references product
alter table problem add constraint FKED8CC29F429305D0 foreign key (poster_id) references user
alter table problem add constraint FKED8CC29FA6B1F7A2 foreign key (product_id) references product
alter table product_backlog_item add constraint FKA29882659A2780F5 foreign key (custom_role_id) references custom_role
alter table product_backlog_item add constraint FKA298826525E191DD foreign key (budget_line_id) references budget_line
alter table product_backlog_item add constraint FKA2988265D4E6642 foreign key (feature_id) references feature
alter table product_backlog_item add constraint FKA2988265AEC2D506 foreign key (owner_user_id) references user
alter table product_backlog_item add constraint FKA2988265BC8571FD foreign key (planned_release_id) references release
alter table product_backlog_item add constraint FKA2988265A6B1F7A2 foreign key (product_id) references product
alter table release add constraint FK41012807A6B1F7A2 foreign key (product_id) references product
alter table remaining_estimation add constraint FKA73809F46F3B8C52 foreign key (task_id) references task
alter table role add constraint FK358076C2179E92 foreign key (user_id) references user
alter table role add constraint FK358076D81D7A32 foreign key (sprint_id) references sprint
alter table role add constraint FK358076A6B1F7A2 foreign key (product_id) references product
alter table sprint add constraint FKCA9D021A373B00A2 foreign key (release_id) references release
alter table sprint_product_backlog_item add constraint FKEDE8CF6AA7D93BA3 foreign key (sprint_product_backlog_items_id) references sprint
alter table sprint_product_backlog_item add constraint FKEDE8CF6A5A4EC52E foreign key (product_backlog_item_id) references product_backlog_item
alter table task add constraint FK3635855A4EC52E foreign key (product_backlog_item_id) references product_backlog_item
alter table task add constraint FK363585D81D7A32 foreign key (sprint_id) references sprint
alter table task add constraint FK36358575123D52 foreign key (team_id) references team
alter table task add constraint FK3635851D13A291 foreign key (creator_id) references user
alter table task_actual add constraint FK59F02188C2179E92 foreign key (user_id) references user
alter table task_actual add constraint FK59F021886F3B8C52 foreign key (task_id) references task
alter table team_composition add constraint FK756806C8C2179E92 foreign key (user_id) references user
alter table team_composition add constraint FK756806C8D81D7A32 foreign key (sprint_id) references sprint
alter table team_composition add constraint FK756806C875123D52 foreign key (team_id) references team
